# 要件定義書
## 目的
* 図書館内の蔵書の予約、貸し出し、返却をシステム化し、正確な蔵書の管理を行うことが目的
## 背景
* これまでExcelデータで手動管理しており、ヒューマンエラーが発生している
## 利用想定者
* 司書
* 蔵書の貸し出し、返却、予約者
## 業務フロー
### 貸し出し
1. 利用者がカウンターに本を持ってくる
2. 利用者が利用者情報と蔵書情報を入力する
3. システムが利用者ステータスに注意があれば期限内に返すよう促す旨を自動で表示
4. 貸し出せない場合、予約フローへ
5. システムがステータスを貸し出し中に変更
6. システムが最終返却日を表示
7. システムが一定時間後に元の入力画面へ移行
### 返却
1. 利用者が蔵書を返却ボックス内に入れる
2. 司書が返却ボックス内の蔵書を蔵書情報御を入力する
3. システムが予約されている場合、画面に予約中の旨を表示する
4. システムが返却期限を過ぎていた場合利用者のステータスを注意に変更する
5. システムが蔵書のステータスを未貸し出しに変更する
6. 司書が予約中の場合取り置く
7. 司書が返却完了した蔵書をに置く
### 予約
1. システムが予定返却日を表示
2. 返却後、再度同一利用者が利用者情報を入力
3. 司書が取り置いた蔵書を渡す
4. システムが蔵書のステータスを貸し出し中に変更
# 機能要件
## 司書ログイン機能
* 事前登録された司書IDとパスワード入力または司書証に印刷されたバーコードで認証機能を実装
* パスワードはPBKDF2(.Net標準)を利用するものとする
* パスワード入力欄は＊で伏せておく
## 蔵書管理機能
* 蔵書の一覧表示
* ログイン中の司書のみ確認可能
* 本の状態（貸し出し中、予約済み、返却最終日、返却滞納中など）
* 本の種類(ID、図書名、著者名、出版社、ジャンルなど)
* 署名、ジャンル、図書名を入力することで蔵書ＩＤを新規生成、割り当てる
## 蔵書貸し出し機能
* 既に貸し出されているか予約されている場合、貸し出し不可能とする
* 蔵書情報と利用者情報を入力することで貸し出し可能な場合、蔵書の貸し出しが可能
## 蔵書返却機能
* 貸し出し済みの蔵書IDを入力した場合返却ができる。
## 蔵書予約機能
* 貸し出し不可能な場合、予約が出来、返却最終日を表示する
* 予約は利用者情報を入力する、予約者と使用者が同一の場合は貸し出し可能
## 利用者管理機能
* 人名、生年月日、性別を入力することで利用者ＩＤを新規作成、割り当てる
* ログイン中の司書は情報の変更が可能
# 非機能要件
## 可用性
* 営業時間内は常に目標稼働率99.9%以上
* システムエラーが発生した場合、当日中に復旧すること
## 性能・拡張性
* 蔵書情報を１千万冊まで登録してもパフォーマンス低下をしないこと
* ログインや絞り込みの応答速度１秒以下
* 館内の全ての端末から同時にアクセスしてもパフォーマンス低下をしないこと
## 運用・保守性
* 毎日閉館後に増分バックアップを
毎月最初の閉館後は代わりにフルバックアップを取る
* 貸し出し、返却、予約履歴は過去３年分保持
## 移行性
* 以前まで使用していたExcelデータの内容を元にカラムなどの分類を作成する
## セキュリティ
* 司書以外が管理画面にアクセス不可能にするため、事前に登録されたメールアドレスによる二段階認証を実施
* 通信はTLSにより暗号化
* ログインされた司書情報が15分以上操作がない場合、自動ログアウト
* 利用者情報は個人情報及び利用履歴はテーブルを分離し、個人情報はデータベースへのアクセス情報を秘匿し、不正アクセスを防止する
* 司書パスワードは平文で保存せずにハッシュ化を行う